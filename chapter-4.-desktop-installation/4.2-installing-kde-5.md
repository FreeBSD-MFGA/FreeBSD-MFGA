# 4.2 Installing KDE 5

> The following tutorial applies to users whose shell is csh or tcsh.
>
> First, see if your shell is csh or tcsh: 
>
> `# echo $0`
>
> If it's either csh or tcsh, continue.

## Install

```
# pkg install xorg sddm plasma5-sddm-kcm kde5 wqy-fonts xdg-user-dirs
```


> The above command installs [X.Org](https://www.freshports.org/x11/xorg/), [SDDM]([url](https://www.freshports.org/x11/sddm/)), a [Plasma module for SDDM]([url](https://www.freshports.org/deskutils/plasma5-sddm-kcm/)), [KDE Plasma desktop environment and applications]([url](https://www.freshports.org/x11/kde5/)), a [GNU GPL-licensed font set covering CJK and other Unicode characters]([url](https://www.freshports.org/x11-fonts/wqy/)), and a [tool to help manage user directories]([url](https://www.freshports.org/devel/xdg-user-dirs/)), respectively.

## Configuration

If `~/.xinitrc` does not exist, and if the intention is for the root user to use Plasma: 

```
# echo "exec ck-launch-session startplasma-x11" > ~/.xinitrc
```

> Please note that root use of the desktop environment is discouraged. 
> 
> `~/.xinitrc` is required only if a user will run [startx(1)]([url](https://www.freebsd.org/cgi/man.cgi?query=startx&sektion=1&manpath=FreeBSD-Ports)). 
> 
> SDDM on FreeBSD will allow a user session (distinct from a Plasma session) without creation of `~/.xinitrc`.

```
sysrc dbus_enable="YES" && service dbus start
sysrc sddm_enable="YES" && service sddm start
```

**Avoid the _Plasma (Wayland)_ default that is presented by sddm**. For Plasma on FreeBSD, Wayland is not yet reliable. Prefer _Plasma (X11)_. 

## i18n

Click Start-> System Settings -> Regional Settings and find "Simplified Chinese" in the `Available Language` column of the `Language` item and click `>` to add it to the `Preferrred Languages` column, then click the `Apply` button; then go to the `Formats` item, change the content in the `Region` text box to "China - Simplified Chinese (zh-CN)", click the `Apply` button, logout and log in again, then the The system language will change to Chinese.

## Troubleshooting

- How to solve the problem that the menu is incomplete when the new normal user logs in KDE due to permission problem?

>You need to add the user to the wheel group.
>
>```
># pw groupmod wheel -m username
>```

>>**Note**
>>
>>Some users feedback that joining the wheel group still doesn't work, you need to create and join the root group.
