# 4.2 Installing KDE Plasma

This tutorial applies to users whose shell is csh or tcsh.

First, see what your shell is: 

`# echo $0`

If it's either csh or tcsh, continue.

## Install

`# pkg install --quiet xorg sddm plasma5-sddm-kcm kde5 wqy-fonts xdg-user-dirs`

The above command installs [X.Org](https://www.freshports.org/x11/xorg/), [SDDM](https://www.freshports.org/x11/sddm/), a [Plasma module for SDDM](https://www.freshports.org/deskutils/plasma5-sddm-kcm/), [KDE Plasma desktop environment and applications](https://www.freshports.org/x11/kde5/), a [GNU GPL-licensed font set covering CJK and other Unicode characters](https://www.freshports.org/x11-fonts/wqy/), and a [tool to help manage user directories](https://www.freshports.org/devel/xdg-user-dirs/), respectively.

Various package messages will appear. 

## Configuration

```
sysrc dbus_enable="YES" && service dbus start
sysrc sddm_enable="YES" && service sddm start
```

* **avoid the _Plasma (Wayland)_ default that is presented by SDDM** – for Plasma on FreeBSD, Wayland is not yet reliable
* prefer _Plasma (X11)_. 

If the root user intends to use Plasma, and if `/root/.xinitrc` does not exist: 

`# echo "exec ck-launch-session startplasma-x11" > /root/.xinitrc`

Note: 

* root use of the desktop environment is discouraged. 

`~/.xinitrc` is required only if a user will run [startx(1)](https://www.freebsd.org/cgi/man.cgi?query=startx&sektion=1&manpath=FreeBSD-Ports) (instead of allowing SDDM to start a session). 

SDDM on FreeBSD does not require `~/.xinitrc` for a non-Plasma _User_ sesssion.

## i18n

Click Start -> System Settings -> Regional Settings and find "Simplified Chinese" in the `Available Language` column of the `Language` item and click `>` to add it to the `Preferrred Languages` column, then click the `Apply` button; then go to the `Formats` item, change the content in the `Region` text box to "China - Simplified Chinese (zh-CN)", click the `Apply` button, logout and log in again, then the The system language will change to Chinese.

## Group memberships

### Graphics

`# pw groupmod video -m username`

Membership of the `video` group allows `username` to access `/dev/dri` for 3D acceleration on video cards. 

### Shutdown and restart

For SDDM to offer commands such as _Shut Down_ to a logged-in user:

`# pw groupmod operator -m username`

From the FreeBSD Handbook, **a warning**: 

> … unintended superuser-like access privileges may be granted, including … access to all items in `/dev` …

### Administration

`# pw groupmod wheel -m username`

The `wheel` group allows administrative access. 
